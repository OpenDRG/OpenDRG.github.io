(self.webpackChunkdrg_group=self.webpackChunkdrg_group||[]).push([[4826],{9481:(e,t,n)=>{var i={"./SS_INFO.csv":[1580,1580],"./SS_MAP.csv":[9227,9227],"./TEST_DATA.csv":[449,449],"./ZD_INFO.csv":[7794,7794],"./ZD_MAP.csv":[7483,7483]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,23)))}r.keys=()=>Object.keys(i),r.id=9481,e.exports=r},401:(e,t,n)=>{var i={"./CC.json":[1314,1314],"./ICD_LOW_RISK.json":[5059,5059],"./MCC.json":[1551,1551]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,19)))}r.keys=()=>Object.keys(i),r.id=401,e.exports=r},8118:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=8118,e.exports=t},8815:(e,t,n)=>{var i={"./beijing_2022.js":[7369,7369],"./changsha_2023.js":[6937,6937],"./changzhou_2022.js":[6089,6089],"./chs_drg_10.js":[7071,7071],"./chs_drg_11.js":[6917,6917],"./fuzhou_2022.js":[1062,1062],"./guangxi_2022.js":[2994,2994],"./haerbin_2022.js":[1097,1097],"./lanzhou_2023.js":[8813,8813],"./liaocheng_2022.js":[2067,2067],"./linfen_2022.js":[9687,9687],"./nanping_2023.js":[9444,9444],"./qingdao_2023.js":[9840,9840],"./suzhou_2023.js":[9863,9863],"./taizhou_2022.js":[5814,5814],"./wlmq_2022.js":[2369,2369],"./wuhan_2022.js":[2731,2731],"./wuxi_2022.js":[97,97],"./xjbt_2022.js":[7581,7581],"./yancheng_2023.js":[9095,9095],"./yantai_2023.js":[409,409],"./yinchuan_2023.js":[6722,6722],"./yunnan_2022.js":[345,345],"./zhejiang_2022.js":[2049,2049]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,23)))}r.keys=()=>Object.keys(i),r.id=8815,e.exports=r},1758:(e,t,n)=>{"use strict";var i=n(3089),r=n.n(i),a=n(7479),s=n.n(a),o=n(8802),l=n.n(o),c=n(3666),d=n.n(c),u=n(5432),p=n.n(u),h=n(4605),g=n.n(h),f=n(3192),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),r()(f.Z,v),f.Z&&f.Z.locals&&f.Z.locals;const m={chs_drg_11:"CHS-DRG 1.1标准版",chs_drg_10:"CHS-DRG 1.0修订版",beijing_2022:"北京2022",zhejiang_2022:"浙江2022(ZJ 1.1)",guangxi_2022:"广西2022",yunnan_2022:"云南2022",yancheng_2023:"江苏盐城2023",suzhou_2023:"江苏苏州2023",taizhou_2022:"江苏泰州2022",wuxi_2022:"江苏无锡2022",changzhou_2022:"江苏常州2022(CHS 1.0)",qingdao_2023:"山东青岛2023",yantai_2023:"山东烟台2023",liaocheng_2022:"山东聊城2022",linyi_2022:"山东临沂2022",fuzhou_2022:"福建福州2022",nanping_2023:"福建南平2023",xian_2020:"陕西西安2020(CHS 1.0)",tongchuan_2022:"陕西铜川2022",chengdu_2022:"四川成都2022(CHS 1.0)",wuhan_2022:"湖北武汉2022",changsha_2023:"湖南长株潭衡2023",linfen_2022:"山西临汾2022",yinchuan_2023:"宁夏银川2023",lanzhou_2023:"甘肃兰州2023",wlmq_2022:"新疆乌鲁木齐2022",xjbt_2022:"新疆兵团2022",haerbin_2022:"黑龙江哈尔滨2022"},_={tongchuan_2022:"chs_drg_11",linyi_2022:"chs_drg_11",xian_2020:"chs_drg_10",chengdu_2022:"chs_drg_10",chs_drg_11:"chs_drg_11",chs_drg_10:"chs_drg_10"},y={"01":"预防保健科","02":"全科医疗科","03":"内科","0301":"呼吸内科","0302":"消化内科","0303":"神经内科","0304":"心血管内科","0305":"血液内科","0306":"肾病学","0307":"内分泌","0308":"免疫学","0309":"变态反应","0310":"老年病","0311":"其他","04":"外科","0401":"普通外科","040101":"肝脏移植","040102":"胰腺移植","040103":"小肠移植","0402":"神经外科","0403":"骨科  ","0404":"泌尿外科  ","040401":"肾脏移植","0405":"胸外科","040501":"肺脏移植","0406":"心脏大血管外科","040601":"心脏移植","0407":"烧伤科","0408":"整形外科","0409":"其他","05":"妇产科","0501":"妇科","0502":"产科","0503":"计划生育","0504":"优生学","0505":"生殖健康与不孕症","0506":"其他","06":"妇女保健科","0601":"青春期保健","0602":"围产期保健","0603":"更年期保健","0604":"妇女心理卫生","0605":"妇女营养","0606":"其他","07":"儿科","0701":"新生儿","0702":"小儿传染病","0703":"小儿消化","0704":"小儿呼吸","0705":"小儿心脏病","0706":"小儿肾病","0707":"小儿血液病","0708":"小儿神经病学","0709":"小儿内分泌","0710":"小儿遗传病","0711":"小儿免疫","0712":"其他","08":"小儿外科","0801":"小儿普通外科","0802":"小儿骨科","0803":"小儿泌尿外科","0804":"小儿胸心外科","0805":"小儿神经外科","0806":"其他","09":"儿童保健科","0901":"儿童生长发育","0902":"儿童营养","0903":"儿童心理卫生","0904":"儿童五官保健","0905":"儿童康复","0906":"其他  ",10:"眼科",11:"耳鼻咽喉科",1101:"耳科",1102:"鼻科",1103:"咽喉科",1104:"其他",12:"口腔科",1201:"口腔内科",1202:"口腔颌面外科",1203:"正畸",1204:"口腔修复",1205:"口腔预防保健",1206:"其他",13:"皮肤科",1301:"皮肤病",1302:"性传播疾病",1303:"其他",14:"医疗美容科",15:"精神科",1501:"精神病",1502:"精神卫生",1503:"药物依赖",1504:"精神康复",1505:"社区防治",1506:"临床心理",1507:"司法精神",1508:"其他",16:"传染科",1601:"肠道传染病",1602:"呼吸道传染病",1603:"肝炎",1604:"虫媒传染病",1605:"动物源性传染病",1606:"蠕虫病",1607:"其它",17:"结核病科",18:"地方病科",19:"肿瘤科",20:"急诊医学科",21:"康复医学科",22:"运动医学科",23:"职业病科",2301:"职业中毒",2302:"尘肺",2303:"放射病",2304:"物理因素损伤",2305:"职业健康监护",2306:"其他",24:"临终关怀科",25:"特种医学与军事医学科",26:"麻醉科",27:"疼痛科",28:"重症医学科",30:"医学检验科",3001:"临床体液、血液",3002:"临床微生物学",3003:"临床生化检验",3004:"临床免疫、血清学",3005:"临床细胞分子遗传学",3006:"其他",31:"病理科",32:"医学影像科",3201:"X线诊断",3202:"CT诊断",3203:"磁共振成像诊断",3204:"核医学",3205:"超声诊断",3206:"心电诊断",3207:"脑电及脑血流图诊断",3208:"神经肌肉电图",3209:"介入放射学",3210:"放射治疗",3211:"其他",50:"中医科",5001:"内科",5002:"外科",5003:"妇产科",5004:"儿科",5005:"皮肤科",5006:"眼科",5007:"耳鼻咽喉科",5008:"口腔科",5009:"肿瘤科",5010:"骨伤科",5011:"肛肠科",5012:"老年病科",5013:"针灸科",5014:"推拿科",5015:"康复医学",5016:"急诊科",5017:"预防保健科",5018:"其他",51:"民族医学科",5101:"维吾尔医学",5102:"藏医学",5103:"蒙医学",5104:"彝医学",5105:"傣医学",5106:"其他",52:"中西医结合科",69:"其他业务科室"},b={1:"男",2:"女"},x={1:"医嘱离院",2:"医嘱转院",3:"医嘱转社区···",4:"非医嘱离院",5:"死亡",9:"其他"},w="病案号,性别,年龄,新生儿年龄天,新生儿出生体重,科室,住院天数,离院方式,诊断编码,手术操作编码,总费用,分组结果,分组过程,MDC,ADRG,DRG,RW",C=ye(document.body,"","div-table"),E=ye(C,"","div-full"),j=ye(E,"病案信息CSV格式快捷输入",""),O=(_e(E,"测试数据集下载",new URL(n(7409),n.b),"测试数据集.csv","margin-left;margin-right",""),ye(E,"","red")),L=be(E,"textarea","","","textarea-baInfo","div-block"),k="病案号,性别,年龄,新生儿年龄天,新生儿出生体重,科室,住院天数,离院方式,诊断编码,手术操作编码\n多个ICD编码用|分隔并加分号";j.title=k,E.querySelector("textarea").title=k;const T=ye(C,"","div-full"),S=be(T,"input","病案号","label-short","input-long"),D=be(T,"select","性别","label-short","input-short"),M=be(T,"input","年龄","label-short","input-short"),z=be(T,"input","年龄天","label-short","input-short"),N=be(T,"input","出生体重","label-short","input-short"),H=be(T,"input","科室","label-short","input-long"),I=be(T,"input","住院天数","label-short","input-short"),Z=be(T,"select","离院方式","label-short","input-long"),A=ye(T,"","margin-top;div-top"),F=be(ye(A,"","div-icd-code"),"textarea","诊断编码(国临版)","label-margin-bottom","icd-code",""),R=ye(A,"","div-icd-desc");ye(R,"诊断描述","div-block");const B=ye(R,"","div-icd-desc-inside"),P=ye(T,"","margin-top;div-top"),Y=be(ye(P,"","div-icd-code"),"textarea","手术操作(国临版)","label-margin-bottom","icd-code",""),U=ye(P,"","div-icd-desc");ye(U,"手术操作描述","div-block");const q=ye(U,"","div-icd-desc-inside");Object.keys(b).forEach((e=>D.add(new Option(b[e],e)))),Object.keys(x).forEach((e=>Z.add(new Option(x[e],e))));const G=ye(C,"","div-full"),J=be(G,"select","分组方案","label-short","","");Object.keys(m).forEach((e=>J.add(new Option(m[e],e))));const K=function(e,t,n,i){const r=document.createElement("button");r.innerText="开始分组";const a=document.createElement("div");return a.appendChild(r),e.appendChild(a),r}(G),[W,X]=function(e,t,n,i){const r=document.createElement("input");r.type="file",r.accept=".csv,.xlsx,.xls",n&&n.split(";").forEach((e=>r.classList.add(e)));const a=document.createElement("div");return a.innerText="导入CSV或EXCEL分组",a.appendChild(r),e.appendChild(a),[r,a]}(G,0,"input-file");ye(X,"支持标准格式(测试数据集)、国考格式(HQMS)、卫统格式(N041/N042)","margin-left;blue");const V=ye(C,"","div-full;background;hide"),$=ye(V,"","div-block"),Q=ye(V,"","div-drg"),ee=ye(V,"","div-drg"),te=ye(V,"","div-block"),ne=ye(C,"","div-full;background;hide");L.value='22139971,1,73,27006,,13030305,8,1,"K80.501,K80.100x001,K83.109,K72.905,E11.900","51.8803,51.8701,51.2300"',L.addEventListener("input",(e=>function(e){if(""==e.trim())return void(O.innerText="请输入病案信息");const t=function(e){let t,n=e,i=new RegExp('"(.*?)"',"g");for(;t=i.exec(e);)n=n.replace(t[0],t[1].replaceAll(",","|"));return n}(e).split(",");t.length<10?O.innerText="病案信息格式不正确，信息不全":(O.innerText="",[S,D,M,z,N,H,I,Z,F,Y].forEach(((e,n)=>{let i=t[n];if(i.lastIndexOf(".")>=0&&".0"==i.slice(i.lastIndexOf("."))&&(i=i.substring(0,i.lastIndexOf("."))),"text"==e.type)e.value=i;else if("select-one"==e.type){for(let t=0;t<e.options.length;t++)if(e.options[t].value==i){e.selectedIndex=t;break}}else"textarea"==e.type&&(e.value=i.split("|").join("\n"))})),F.dispatchEvent(new Event("input")),Y.dispatchEvent(new Event("input")))}(e.target.value))),K.addEventListener("click",(()=>{V.querySelectorAll("div").forEach((e=>e.innerText=""));var e=X.querySelector("input");e&&(e.value=""),ne.style.display="none",async function(e){const{group_record:t,CC:i,MCC:r,CCE:a}=await n(8815)("./"+pe()+".js");let s={};s.Index=e[0],s.gender=e[1],s.age=e[2],s.ageDay=e[3],s.weight=e[4],s.dept=e[5],s.inHospitalTime=e[6],s.leavingType=e[7],s.zdList=e[8],s.ssList=e[9];let o=[];const l=await n.e(7483).then(n.t.bind(n,7483,23)),c=await n.e(9227).then(n.t.bind(n,9227,23));let d={},u={};Object.values(l).reduce(((e,t,n)=>d[t[0]]=t[1]),{}),Object.values(c).reduce(((e,t,n)=>u[t[0]]=t[1]),{});for(let e in s.zdList)if(s.zdList[e]in d){let t=d[s.zdList[e]];o.push(s.zdList[e]+"转为医保码"+t),s.zdList[e]=t}for(let e in s.ssList)if(s.ssList[e]in u){let t=u[s.ssList[e]];o.push(s.ssList[e]+"转为医保码"+t),s.ssList[e]=t}let p=t(s);return p.messages.unshift.apply(p.messages,o),p.messages.push.apply(p.messages,we(s.zdList,i,r,a)),{drg:p.drg,messages:p.messages}}(function(){let e=[];return[S,D,M,z,N,H,I,Z,F,Y].forEach((t=>{if("text"==t.type)t.value.trim()?e.push(t.value.trim()):e.push("");else if("select-one"==t.type){for(let n=0;n<t.options.length;n++)if(t.options[n].selected){e.push(t.options[n].value);break}t.selected}else"textarea"==t.type&&(t.value.trim()?e.push(t.value.trim().split("\n")):e.push(""))})),e}()).then((e=>(Q.innerHTML=e.drg,$.innerHTML=function(e){const t=document.createElement("ul");e.forEach((e=>{let n=document.createElement("li");n.innerHTML=e,t.appendChild(n)}));const n=document.createElement("div");return n.appendChild(t),n.innerHTML}(e.messages),e.drg))).then(Oe)})),F.addEventListener("input",(e=>{e.target.style.height="20px",e.target.style.height=e.target.scrollHeight+"px",B.style.height=e.target.style.height,e.target.value.trim()?async function(e){const t=await n(9481)("./ZD_INFO.csv");const i=await n(401)("./MCC.json"),r=await n(401)("./CC.json");return e.map(((e,n)=>{let a=Object.values(t).find((t=>t[0]==e)),s=a?a[1]:"无效编码";return 0==n?s:Object.values(i).includes(e)?'<font color="red"><strong>MCC</strong></font> '+s:Object.values(r).includes(e)?'<font color="red"><strong>CC</strong></font> '+s:s}))}(e.target.value.split("\n")).then((e=>B.innerHTML=e.join("<br>"))):B.value=""})),Y.addEventListener("input",(e=>{e.target.style.height="20px",e.target.style.height=e.target.scrollHeight+"px",q.style.height=e.target.style.height,e.target.value.trim()?async function(e){const t=await n(9481)("./SS_INFO.csv");return e.map(((e,n)=>{let i=Object.values(t).find((t=>t[0]==e));return i?i[1]:"无效编码"}))}(e.target.value.split("\n")).then((e=>q.innerHTML=e.join("<br>"))):q.value=""})),W.addEventListener("change",(e=>{if(!e.target.files||0==e.target.files.length)return;V.style.display="none";var t=G.querySelector(".red");t&&t.remove();let i=e.target.value.substring(e.target.value.lastIndexOf(".")).toLowerCase();if(".xls"==i||".xlsx"==i){let t=new FileReader;t.readAsBinaryString(e.target.files[0]),t.onload=e=>async function(e){const{read:t,utils:i}=await n.e(7550).then(n.bind(n,7550));let r=t(e,{type:"binary"});return i.sheet_to_csv(r.Sheets[r.SheetNames[0]])}(e.target.result).then(de)}else{let t=new FileReader;t.readAsText(e.target.files[0],"GB2312"),t.onload=e=>de(e.target.result)}})),J.addEventListener("change",(()=>{})),L.dispatchEvent(new Event("input"));const ie=(e,t)=>{const n={};return e.forEach((function(e){const i=JSON.stringify(t(e));n[i]=n[i]||[],n[i].push(e)})),n},re=(e,t)=>{if("function"==typeof t){let n={};return Object.keys(e).forEach((i=>n[i.replaceAll('"',"")]=t(e[i]))),n}return t instanceof Array?Object.keys(e).map((n=>{let i=[n.replaceAll('"',"")];return t.forEach((t=>i.push(t(e[n])))),i})):Object.keys(e)},ae=(e,t)=>(e.filter(t).length/e.length).toFixed(4),se=(e,t)=>new Set(e.map((e=>e[t]))).size,oe=e=>e.length,le=(e,t)=>e.filter((e=>e[t]&&""!=e[t])).map((e=>parseFloat(e[t]))).reduce(((e,t)=>e+t),0)/e.filter((e=>e[t]&&""!=e[t])).length,ce=(e,t)=>e.map((e=>parseFloat(e[t]))).reduce(((e,t)=>e+t));async function de(e){return(await n.e(1744).then(n.t.bind(n,1744,23))).parse(e,{complete:he})}function ue(){return J.value}function pe(){let e=J.value;return e in _&&(e=_[e]),e}function he(e){const t=e.data[0].map((e=>e.toUpperCase()));let i,r=e.data.slice(1);if(""==r[r.length-1]&&r.pop(),"病案号"==t[0]){if("病案号,性别,年龄,新生儿年龄天,新生儿出生体重,科室,住院天数,离院方式,诊断编码,手术操作编码,总费用".split(",").filter((e=>!t.includes(e))).length>0)return;i=async function(e){const{group_record:t,CC:i,MCC:r,CCE:a}=await n(8815)("./"+pe()+".js");let s=e.map((e=>{let n={};n.Index=e[0],n.gender=e[1],n.age=e[2],n.ageDay=e[3],n.weight=e[4],n.dept=e[5],n.inHospitalTime=e[6],n.leavingType=e[7],n.zdList=e[8].split(","),n.ssList=e[9].split(","),n.amount=e[10];let s=t(n);return"分组成功"!=s.status&&"歧义病案"!=s.status||s.messages.push.apply(s.messages,we(n.zdList,i,r,a)),s}));return s}(r)}else if(t.includes("A01")){let e="A48,A12C,A14,A16,A18x01,B16C,B20,B34C,D01".split(","),n=t.filter((e=>"C03C"==e||e.startsWith("C06x"))),a=t.filter((e=>"C14x01C"==e||e.startsWith("C35x")));const s=e.filter((e=>!t.includes(e)));if(s.length>0)return void ye(X,"字段缺失："+s.slice(0,10).join(","),"margin-left;red");i=je(r,e.map((e=>t.indexOf(e))),n.map((e=>t.indexOf(e))),a.map((e=>t.indexOf(e))))}else if(t.includes("USERNAME")&&t.includes("ZB")){let e;if(t.includes("BZYZS_NL"))e="BAH,XB,NL,BZYZS_NL,XSETZ,RYKB,SJZY,LYFS,ZFY".split(",");else{if(!t.includes("BZYZSNL"))return void ye(X,"中医病案文件格式不正确","margin-left;red");e="BAH,XB,NL,BZYZSNL,XSECSTZ,RYKB,SJZYTS,LYFS,ZFY".split(",")}let n=t.filter((e=>e.startsWith("ZYZD_JBBM"))),a=t.filter((e=>e.startsWith("SSJCZBM")));const s=e.filter((e=>!t.includes(e)));if(s.length>0)return void ye(X,"字段缺失："+s.slice(0,10).join(","),"margin-left;red");i=je(r,e.map((e=>t.indexOf(e))),n.map((e=>t.indexOf(e))),a.map((e=>t.indexOf(e))))}else{if(!t.includes("USERNAME"))return void ye(X,"文件格式不正确","margin-left;red");{let e="BAH,XB,NL,BZYZSNL,XSECSTZ,RYKB,SJZYTS,LYFS,ZFY".split(","),n=t.filter((e=>e.startsWith("JBDM"))),a=t.filter((e=>e.startsWith("SSJCZBM")));const s=e.filter((e=>!t.includes(e)));if(s.length>0)return void ye(X,"字段缺失："+s.slice(0,10).join(","),"margin-left;red");i=je(r,e.map((e=>t.indexOf(e))),n.map((e=>t.indexOf(e))),a.map((e=>t.indexOf(e))))}}i.then(ge).then(fe)}async function ge(e){let t=e.map((e=>({Index:e.Index,gender:e.record.gender,age:e.record.gender,ageDay:e.record.ageDay,weight:e.record.weight,dept:e.record.dept,inHospitalTime:e.record.inHospitalTime,leavingType:e.record.leavingType,zdList:e.record.zdList,ssList:e.record.ssList,amount:e.record.amount,status:e.status,messages:e.messages,mdc:e.mdc,adrg:e.adrg,drg:e.drg})));console.log("data",t);let i=re(ie(t,(e=>e.status)),oe);i["总数"]=t.length,i["入组率"]=me((i["分组成功"]??0)/i["总数"]);let r=t.filter((e=>"分组成功"==e.status)),a={data:t,group_stat:i,total_stat:{平均住院时间:le(t,"inHospitalTime")?.toFixed(2),平均住院费用:le(t,"amount")?.toFixed(2),DRG组数:se(r,"drg")}};try{const e=await n(2646)("./"+ue()+".csv");if(e[0].length>2){let n={};Object.values(e).slice(1).reduce(((e,t,i)=>n[t[0]]=t[2]),{}),t.forEach((e=>e.rw=n[e.drg])),a.total_stat.CMI=le(r,"rw")?.toFixed(4)}}catch(e){console.log(e)}try{const e=await n.e(5059).then(n.t.bind(n,5059,19));let i=t.filter((t=>Object.values(e).includes(t.zdList[0].substring(0,3)))),r=i.filter((e=>"5"==e.leavingType)),s=0==r.length||0==i.length?0:me(r.length/i.length,3);a.arr_icd_low_risk_death=r,a.icd_low_risk_death_rate=s}catch(e){console.log(e)}try{const e=await n(8118)("./DRG_LOW_RISK-"+pe()+".json");let i=t.filter((t=>Object.values(e).includes(t.drg))),r=i.filter((e=>"5"==e.leavingType)),s=0==r.length||0==i.length?0:me(r.length/i.length,3);a.arr_drg_low_risk_death=r,a.drg_low_risk_death_rate=s}catch(e){console.log(e)}if(t&&t.length>0&&t[0].hasOwnProperty("rw")){let e=re(ie(t,(e=>e.dept)),[e=>ae(e,(e=>"分组成功"==e.status)),e=>se(e,"drg"),e=>le(e,"rw")?.toFixed(4),e=>le(e,"inHospitalTime")?.toFixed(2),e=>le(e,"amount")?.toFixed(2)]),n=re(ie(r,(e=>e.drg)),(e=>le(e,"inHospitalTime"))),i=re(ie(r,(e=>e.drg)),(e=>le(e,"amount"))),s=re(ie(r,(e=>e.dept)),(e=>re(ie(e,(e=>e.drg)),(e=>ce(e,"inHospitalTime"))))),o=re(ie(r,(e=>e.dept)),(e=>re(ie(e,(e=>e.drg)),(e=>ce(e,"amount"))))),l=re(ie(t,(e=>e.dept)),(e=>se(e,"Index"))),c=Object.keys(s).map((e=>Object.keys(s[e]).map((t=>s[e][t]/n[t])).reduce(((e,t)=>e+t))/l[e])),d=Object.keys(o).map((e=>Object.keys(o[e]).map((t=>o[e][t]/i[t])).reduce(((e,t)=>e+t))/l[e]));e.forEach((e=>e.push.apply(e,[c[Object.keys(s).indexOf(e[0])]?.toFixed(4),d[Object.keys(o).indexOf(e[0])]?.toFixed(4)]))),e.forEach((e=>y.hasOwnProperty(e[0])&&e.splice(0,1,y[e[0]]))),a.dept_stat=e}return console.log(a),a}function fe(e){_e(ne,"分组结果下载",xe(ve(e.data)),"DRG分组结果.csv","","div-block"),ye(ne,Le(Object.keys(e.group_stat),e.group_stat),""),ye(ne,Le("DRG组数,CMI,平均住院时间,平均住院费用".split(","),e.total_stat),"");let t=ye(ne,"","div-block");e.hasOwnProperty("icd_low_risk_death_rate")&&ye(t,"ICD低风险病种死亡率："+e.icd_low_risk_death_rate,"red"),e.hasOwnProperty("arr_icd_low_risk_death")&&0!=e.arr_icd_low_risk_death.length&&_e(t,"下载",xe(ve(e.arr_icd_low_risk_death)),"ICD低风险病种病案.csv","",""),e.hasOwnProperty("drg_low_risk_death_rate")&&ye(t,"DRG低风险组死亡率："+e.drg_low_risk_death_rate,"red"),e.hasOwnProperty("arr_drg_low_risk_death")&&0!=e.arr_drg_low_risk_death.length&&_e(t,"下载",xe(ve(e.arr_drg_low_risk_death)),"DRG低风险组病案.csv","",""),e.hasOwnProperty("dept_stat")&&ye(ne,Le("科室,入组率,DRG组数,CMI,平均住院时间,平均住院费用,时间消耗指数,费用消耗指数".split(","),e.dept_stat),"div-block"),ne.style.display="block"}function ve(e){let t=e.map((e=>[e.Index,e.gender,e.age,e.ageDay,e.weight,e.dept,e.inHospitalTime,e.leavingType,'"'+e.zdList+'"','"'+e.ssList+'"',e.amount,e.status,'"'+e.messages+'"',e.mdc,e.adrg,e.drg,e.rw].join(",")));return t.unshift("\ufeff"+w),t.join("\n")}function me(e,t=1){return Number(100*e).toFixed(t)+"%"}function _e(e,t,n,i,r,a){const s=document.createElement("a");s.text=t,r&&r.split(";").forEach((e=>s.classList.add(e))),i&&s.setAttribute("download",i),s.href=n;const o=document.createElement("div");return a&&o.classList.add(a),o.appendChild(s),e.appendChild(o),s}function ye(e,t,n){const i=document.createElement("div");return i.innerHTML=t,n&&n.split(";").forEach((e=>i.classList.add(e))),e.appendChild(i),i}function be(e,t,n,i,r,a){const s=document.createElement(t);r&&r.split(";").forEach((e=>s.classList.add(e)));const o=document.createElement("div");if(a&&a.split(";").forEach((e=>o.classList.add(e))),n){const e=document.createElement("label");e.htmlFor=s,e.textContent=n,i&&e.classList.add(i),o.appendChild(e)}return o.appendChild(s),e.appendChild(o),s}function xe(e){let t=new Blob([e],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});return window.URL.createObjectURL(t)}function we(e,t,n,i){let r=[],a=i.hasOwnProperty(e[0])?i[e[0]]:"",s=e.slice(1).filter((e=>n.hasOwnProperty(e)&&(a||a!==n[e]))),o=e.slice(1).filter((e=>t.hasOwnProperty(e)&&(a||a!==n[e])));return a&&r.push("主诊断"+e[0]+"排除表"+a),s&&s.length>0&&r.push(s.join("/")+"属于MCC"),o&&o.length>0&&r.push(o.join("/")+"属于CC"),r}function Ce(e){let t=(e=e.trim()).indexOf(".");return t>=0?1==t||e.length-t<=4?(n=e.slice(0,t),2,(Array(2).join("0")+n).slice(-2)+"."+Ee(e.slice(t+1),4)):e:"00."+Ee(e,4);var n}function Ee(e,t){return(e+Array(t).join("0")).slice(0,t)}async function je(e,t,i,r){const{group_record:a,CC:s,MCC:o,CCE:l}=await n(8815)("./"+pe()+".js"),c=await n.e(7483).then(n.t.bind(n,7483,23)),d=await n.e(9227).then(n.t.bind(n,9227,23));let u={},p={};return Object.values(c).reduce(((e,t,n)=>u[t[0]]=t[1]),{}),Object.values(d).reduce(((e,t,n)=>p[t[0]]=t[1]),{}),e.map((e=>{let n={};n.Index=e[t[0]],n.gender=e[t[1]],n.age=e[t[2]],n.ageDay=e[t[3]],n.ageDay="-"==n.ageDay||""==n.ageDay?0:n.ageDay,n.weight=e[t[4]],n.weight="-"==n.weight||""==n.weight?0:n.weight,n.dept=e[t[5]],n.inHospitalTime=e[t[6]],n.leavingType=e[t[7]],n.amount=e[t[8]],n.zdList=i.map((t=>e[t])).filter((e=>""!=e)).map((e=>e in u?u[e]:e)),n.ssList=r.map((t=>e[t])).filter((e=>""!=e&&"-"!=e)).map(Ce).map((e=>e in p?p[e]:e));let c=a(n);return c.messages.push.apply(c.messages,we(n.zdList,s,o,l)),c}))}async function Oe(e){try{const t=await n(2646)("./"+ue()+".csv");let i=Object.values(t).slice(1).find((t=>t[0]==e));i&&i.length>1&&(ee.innerText=i[1],i.length>2&&(te.innerHTML=Le(t[0].slice(2),[i.slice(2)])))}catch(e){console.log(e)}V.style.display="block"}function Le(e,t){let n,i=document.createElement("table"),r=document.createElement("thead"),a=document.createElement("tbody");t instanceof Array?(n=document.createElement("tr"),e.forEach((e=>{let t=document.createElement("th");t.innerText=e,n.appendChild(t)})),r.appendChild(n),t.forEach((e=>{n=document.createElement("tr"),e.forEach((e=>{let t=document.createElement("td");void 0===e||"number"==typeof e&&isNaN(e)||"NaN"===e?t.innerText="":t.innerText="string"==typeof e?e.replace(/([0-9]+.[0-9]{4})[0-9]*/,"$1"):e,n.appendChild(t)})),a.appendChild(n)}))):(n=document.createElement("tr"),e.forEach((e=>{if(t.hasOwnProperty(e)){let t=document.createElement("th");t.innerText=e,n.appendChild(t)}})),r.appendChild(n),n=document.createElement("tr"),e.forEach((e=>{if(t.hasOwnProperty(e)){let i=document.createElement("td"),r=t[e];void 0===r||"number"==typeof r&&isNaN(r)||"NaN"===r?i.innerText="":i.innerText="string"==typeof r?r.replace(/([0-9]+.[0-9]{4})[0-9]*/,"$1"):r,n.appendChild(i)}})),a.appendChild(n)),i.appendChild(r),i.appendChild(a);const s=document.createElement("div");return s.appendChild(i),s.innerHTML}},3192:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(4799),r=n.n(i),a=n(7884),s=n.n(a)()(r());s.push([e.id,":root{\n  --div-full-width:820px;\n}\n\n@media (max-width: 1000px) {\n  :root{\n    --div-full-width:410px;\n  }\n}\n\n.red {\n  color: red;\n}\n\n.blue {\n  color: blue;\n}\n\ndiv {\n  margin-top:2px;margin-right:10px;display:inline-block;\n}\n\nlabel,a,div,button {\n  font-size:11pt;font-family:'Microsoft YaHei';\n}\n\n.label-margin-bottom{\n  margin-bottom:2px;\n}\n\n.margin-top {\n  margin-top: 6px;\n}\n\n.margin-left {\n  margin-left: 20px;\n}\n\n.margin-right {\n  margin-right: 20px;\n}\n\ninput,select,textarea {\n  font-size:11pt;font-family:'Microsoft YaHei';\n}\n\n.div-table {\n  display:table;\n  margin:0 auto;\n}\n\n.div-inline-block {\n  display:inline-block;\n}\n\n.div-block {\n  display:block;\n}\n\n.div-full {\n  width: var(--div-full-width);\n  padding: 6px;\n  border: 1px solid black;\n  display:block;\n}\n\n.div-top {\n  vertical-align:top;\n}\n\n.textarea-baInfo {\n  /* float:left; */\n  display:inline-block;\n  width: 100%;/* width: 800px; */\n  padding: 6px;\n}\n\n.div-icd-code{\n  width:130px;\n}\n\n.div-icd-desc{\n  width:240px;\n  vertical-align:top;\n}\n\n.div-icd-desc-inside{\n  width:240px;\n  padding: 4px 6px;\n  border:1px solid black;\n  white-space: nowrap;\n}\n\n.background {\n  background-color: antiquewhite;\n}\n\n.hide {\n  display: none;\n}\n\n.div-drg {\n  color: red;\n  font-size: 14pt;\n  /* display:block; */\n}\n\n.div-input {\n  width: 200;\n}\n\nlabel {\n  display:inline-block;\n}\n\n.label-short {\n  width:70px;\n}\n\n.input-short {\n  width:50px;\n  display:block;\n}\n\n.input-long {\n  width:100px;\n  display:block;\n}\n\n.input-file {\n  width:160px;display:inline-block;margin-left: 10px;\n}\n\n.icd-code{\n  width:100%;padding: 4px 6px;\n}\n\n.icd-name{\n  width:100%;\n  background-color:beige;cursor:not-allowed;opacity:0.6;\n}\n\n.zdList,.ssList {\n  width: 40%;\n  font-size: 11pt; \n  padding: 6px;\n}\n\npre {\n  white-space: pre-wrap; \n  color: blue; \n  font-size: 11pt; \n  font-family: monospace;\n}\n\ntable {\n  font-family: verdana,arial,sans-serif;\n  font-size:11px;\n  color:#333333;\n  border-width: 1px;\n  border-color: #666666;\n  border-collapse: collapse;\n  /* width: 100%; */\n}\nth {\n  border-width: 1px;\n  padding: 8px;\n  border-style: solid;\n  border-color: #666666;\n  background-color: #dedede;\n}\ntd {\n  border-width: 1px;\n  padding: 8px;\n  border-style: solid;\n  border-color: #666666;\n  background-color: #ffffff;\n}",""]);const o=s},7884:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},4799:e=>{"use strict";e.exports=function(e){return e[1]}},3089:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},s=[],o=0;o<e.length;o++){var l=e[o],c=i.base?l[0]+i.base:l[0],d=a[c]||0,u="".concat(c," ").concat(d);a[c]=d+1;var p=n(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var g=r(h,i);i.byIndex=o,t.splice(o,0,{identifier:u,updater:g,references:1})}s.push(u)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=i(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=n(a[s]);t[o].references--}for(var l=i(e,r),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},8802:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},5432:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3666:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7479:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4605:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2646:(e,t,n)=>{var i={"./beijing_2022.csv":[8565,8565],"./changsha_2023.csv":[9718,9718],"./changzhou_2022.csv":[8066,8066],"./chengdu_2022.csv":[9288,9288],"./chs_drg_10.csv":[9649,9649],"./chs_drg_11.csv":[5845,5845],"./fuzhou_2022.csv":[9544,9544],"./guangxi_2022.csv":[9167,9167],"./haerbin_2022.csv":[5438,5438],"./lanzhou_2023.csv":[8381,8381],"./liaocheng_2022.csv":[2360,2360],"./linfen_2022.csv":[3364,3364],"./linyi_2022.csv":[5088,5088],"./nanping_2023.csv":[2795,2795],"./qingdao_2023.csv":[8934,8934],"./suzhou_2023.csv":[4714,4714],"./taizhou_2022.csv":[2665,2665],"./tongchuan_2022.csv":[8838,8838],"./wlmq_2022.csv":[7212,7212],"./wuhan_2022.csv":[5909,5909],"./wuxi_2022.csv":[2736,2736],"./xian_2020.csv":[8261,8261],"./xjbt_2022.csv":[122,122],"./yancheng_2023.csv":[233,233],"./yantai_2023.csv":[2210,2210],"./yinchuan_2023.csv":[7266,7266],"./yunnan_2022.csv":[7839,7839],"./zhejiang_2022.csv":[3966,3966]};function r(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,23)))}r.keys=()=>Object.keys(i),r.id=2646,e.exports=r},7409:(e,t,n)=>{"use strict";e.exports=n.p+"f108f13b4a6c0c3507e5.csv"}},e=>{e(e.s=1758)}]);